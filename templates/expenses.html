{% extends 'base.html' %}

{% block title %}Expenses - R Sanju Store{% endblock %}

{% block content %}
<section class="page">
  <div class="page-header">
    <h2>Expenses / Infrastructure Costs</h2>
  </div>

  <form method="post" class="form" style="margin-bottom: 1rem;">
    <div class="form-grid">
      <div>
        <label>
          Date
          <input type="date" name="date" value="{{ today }}" required />
        </label>
      </div>
      <div>
        <label>
          Description
          <input type="text" name="description" placeholder="e.g. Shop rent, electricity, staff salary" required />
        </label>
      </div>
      <div>
        <label>
          Category (optional)
          <input type="text" name="category" placeholder="e.g. Infrastructure, Utilities, Staff" />
        </label>
      </div>
      <div>
        <label>
          Amount
          <input type="number" name="amount" step="0.01" min="0" required />
        </label>
      </div>
    </div>
    <div class="form-actions">
      <button type="submit" class="btn primary">Add Expense</button>
      <a class="btn" href="{{ url_for('export_expenses') }}">Export to Excel</a>
    </div>
  </form>

  <h3>Recent Expenses</h3>
  {% if expenses %}
    <table class="table">
      <thead>
        <tr>
          <th>Date</th>
          <th>Description</th>
          <th>Category</th>
          <th class="text-right">Amount</th>
        </tr>
      </thead>
      <tbody>
        {% for exp in expenses %}
          <tr>
            <td>{{ exp.date }}</td>
            <td>{{ exp.description }}</td>
            <td>{{ exp.category or '-' }}</td>
            <td class="text-right">{{ '%.2f'|format(exp.amount or 0) }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>No expenses recorded yet.</p>
  {% endif %}
</section>
{% endblock %}
